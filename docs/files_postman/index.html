<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-151987025-2","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Overview | Leaf</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Overview | Leaf"><meta data-react-helmet="true" name="description" content="Files - Overview"><meta data-react-helmet="true" property="og:description" content="Files - Overview"><meta data-react-helmet="true" property="og:url" content="https://leaf-devops.s3.us-west-2.amazonaws.com/send.sh/docs/docs/files_postman"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/icon4dark_mode.png"><link data-react-helmet="true" rel="canonical" href="https://leaf-devops.s3.us-west-2.amazonaws.com/send.sh/docs/docs/files_postman"><link rel="stylesheet" href="/docs/styles.70498a45.css">
<link rel="preload" href="/docs/styles.3d192486.js" as="script">
<link rel="preload" href="/docs/runtime~main.4306c51d.js" as="script">
<link rel="preload" href="/docs/main.e7a0127b.js" as="script">
<link rel="preload" href="/docs/1.211e5842.js" as="script">
<link rel="preload" href="/docs/2.ccad432d.js" as="script">
<link rel="preload" href="/docs/3.53e9e6d7.js" as="script">
<link rel="preload" href="/docs/1be78505.2338d5f2.js" as="script">
<link rel="preload" href="/docs/101.350d9c3a.js" as="script">
<link rel="preload" href="/docs/64f9f2ab.425176b5.js" as="script">
<link rel="preload" href="/docs/17896441.ce50a2d7.js" as="script">
<link rel="preload" href="/docs/d3cdf188.bfa2a2c1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://withleaf.io" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img class="navbar__logo" src="/docs/img/logo4light_mode.png" alt="logo"><strong class="navbar__title"></strong></a><a href="https://withleaf.io/for-developers/tutorials" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Tutorials</a><a href="https://withleaf.io/products/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Products</a><a href="https://withleaf.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Website</a><a href="https://withleaf.io/company/careers" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Work with us</a><a href="https://withleaf.io/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://withleaf.io/account/quickstart" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Register</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Leaf-Agriculture/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://withleaf.io" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img class="navbar__logo" src="/docs/img/logo4light_mode.png" alt="logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://withleaf.io/for-developers/tutorials" target="_blank" rel="noopener noreferrer" class="menu__link">Tutorials</a></li><li class="menu__list-item"><a href="https://withleaf.io/products/" target="_blank" rel="noopener noreferrer" class="menu__link">Products</a></li><li class="menu__list-item"><a href="https://withleaf.io" target="_blank" rel="noopener noreferrer" class="menu__link">Website</a></li><li class="menu__list-item"><a href="https://withleaf.io/company/careers" target="_blank" rel="noopener noreferrer" class="menu__link">Work with us</a></li><li class="menu__list-item"><a href="https://withleaf.io/blog" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a href="https://withleaf.io/account/quickstart" target="_blank" rel="noopener noreferrer" class="menu__link">Register</a></li><li class="menu__list-item"><a href="https://github.com/Leaf-Agriculture/docs" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Overview</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="overview"></a>Overview<a aria-hidden="true" tabindex="-1" class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>Leaf&#x27;s Operation Data API returns aggregated, cleaned, and standardized data
from all major machine data brands in a simple JSON response. This tutorial will
walk through how to create a Leaf user, securely authenticate with their chosen
platforms, and receive auto-updating data from all of them with a single request.</p><p>We also provide a <a href="https://github.com/Leaf-Agriculture/Leaf-quickstart-Postman-collection" target="_blank" rel="noopener noreferrer">quickstart</a> Postman collection so you can follow
along easily.</p><p>To make calls to Leaf&#x27;s API, you will need a Leaf account. If you don&#x27;t have one
yet, please create your Leaf account and get your token.</p><p>You can integrate with many different companies, and you only have to do it once
for each user. To connect, you just choose the company you wish to connect to
and follow these 3 steps:</p><ol><li>Get the authentication URL of company you want to connect to</li><li>Get yours and your user&#x27;s tokens</li><li>Add credentials to Leaf</li></ol><p>Now you can opt to connect to more companies or Create a Leaf User and attach
these credentials, so that Leaf can represent your user internally and you can
query specifically for them and their data.</p><p><strong>All set!</strong></p><p>Leaf automatically detects and starts processing new files. You can access in
&quot;Get Operation Files&quot;.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="roadmap"></a>Roadmap<a aria-hidden="true" tabindex="-1" class="hash-link" href="#roadmap" title="Direct link to heading">#</a></h3><p>Today, you can to connect to these companies:</p><ul><li>John Deere (<a href="https://medium.com/leaf-agriculture/how-to-use-leafs-api-to-retrieve-machinery-data-from-john-deere-fb1ba331d089" target="_blank" rel="noopener noreferrer">Medium</a>)</li><li>Climate FieldView (<a href="https://medium.com/leaf-agriculture/how-to-use-leafs-api-to-retrieve-machinery-data-from-climate-fieldview-dda921f40291" target="_blank" rel="noopener noreferrer">Medium</a>)</li><li>CNHi</li><li>Trimble</li></ul><p>Coming in the third quarter of 2020:</p><ul><li>Raven</li><li>AGCO</li></ul><p>Coming in the fourth quarter of 2020:</p><ul><li>AgLeader</li><li>Stara</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="john-deere"></a>John Deere<a aria-hidden="true" tabindex="-1" class="hash-link" href="#john-deere" title="Direct link to heading">#</a></h3><p>This section will show you how you can integrate Leaf&#x27;s API with you John Deere
account and start using our operations service. Grab our <a href="https://github.com/Leaf-Agriculture/Leaf-quickstart-Postman-collection" target="_blank" rel="noopener noreferrer">quickstart</a>
Postman collection and follow along!</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1-get-john-deere-auth-url"></a>1. Get John Deere auth URL<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1-get-john-deere-auth-url" title="Direct link to heading">#</a></h4><p>In Step 1 we will be generating tokens from John Deere. The goal In step 2 is we
will get our John Deere <code>token_id</code> and <code>token_secret</code>.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="token-verifier"></a>Token Verifier<a aria-hidden="true" tabindex="-1" class="hash-link" href="#token-verifier" title="Direct link to heading">#</a></h5><p>In step 1 we will get a temporary &quot;token verifier&quot; from John Deere that confirms
an userâ€™s authentication of your application to access their John Deere data and
generate credentials. We get that verifier by going through their authentication
flow (<a href="https://www.oauth.com/" target="_blank" rel="noopener noreferrer">OAuth2</a>). Before generating the authentication URL, please:</p><ul><li>Update current value of <code>jd_client_key</code> to your app&#x27;s client key on John Deere</li><li>Update current value of <code>jd_client_secret</code> to your app&#x27;s client secret on John
Deere</li><li>Update current value of <code>jd_callback_url</code> to your app&#x27;s callback_url on John
Deere</li></ul><p>Then, to generate the authentication URL your application will send to your user
so they can authorize access to their account files you can use the included
step 2 in the Postman Collection. Change <code>client_key</code> and <code>client_ secret</code>
variables to yours received from John Deere when you created an app on your
developer account with them and <code>redirect_uri</code> to a uri the &quot;token verifier&quot;
will be sent after the user authorizes your application. Hit <em>Send</em>.</p><p>Redirect your user to the url included in the response.</p><p>They will authenticate and be redirected to the <code>redirect_url</code>.</p><p>Copy the entire url you were redirected to. It looks like:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">https://withleaf.io/?oauth_token=TOKEN&amp;oauth_verifier=CODE</span></div></div></div></div></div><p>Paste it in the environment variable <code>jd_response_url</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2-get-john-deere-tokens"></a>2. Get John Deere Tokens<a aria-hidden="true" tabindex="-1" class="hash-link" href="#2-get-john-deere-tokens" title="Direct link to heading">#</a></h4><p>After updating the <code>jd_response_url</code> in Postman you can submit your credentials
and receive your tokens.</p><p>Hit <em>Send</em></p><p><code>token_id</code> and <code>token_secret_key</code> will be automatically transferred to
<code>jd_token_id</code> and <code>jd_token_secret</code> environment variables and will be used in
the next step.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="3-add-john-deere-credentials"></a>3. Add John Deere credentials<a aria-hidden="true" tabindex="-1" class="hash-link" href="#3-add-john-deere-credentials" title="Direct link to heading">#</a></h4><p>Now we can create a Developer-User pair credentials ID that will allow you to
access your userâ€™s John Deere data. We first add the John Deere credentials to
Leaf API.</p><p>Hit <em>Send</em></p><p>All the info needed has already been filled automatically in Step 2.</p><p>An <code>id</code> for the credentials you just created will be returned. This <code>id</code> will
be automatically transferred to the value of <code>jd_credentials_id</code> to be used in
the next step.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="climate-fieldview"></a>Climate FieldView<a aria-hidden="true" tabindex="-1" class="hash-link" href="#climate-fieldview" title="Direct link to heading">#</a></h3><p>Grab our <a href="https://github.com/Leaf-Agriculture/Leaf-quickstart-Postman-collection" target="_blank" rel="noopener noreferrer">quickstart</a> Postman collection and follow along!</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1-get-climate-fieldview-auth-url"></a>1. Get Climate FieldView auth URL<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1-get-climate-fieldview-auth-url" title="Direct link to heading">#</a></h4><p>We will be generating a url to redirect your user to authenticate with Climate.</p><p>Update environment variables <code>cfv_client_id</code> and <code>cfv_client_secret</code> to your
Climate FieldView developer account credentials.</p><p>Update environment variable <code>cfv_redirect_url</code> to your application&#x27;s backend</p><p>Redirect your user to the script&#x27;s output url.</p><p>They will authenticate and be redirected to the <code>redirect_uri</code>.</p><p>A code will be sent to that <code>cfv_redirect_url</code>. We will need this code Step 2.</p><p>Copy the code value.</p><p>note: this code expires after 1 minute.</p><p>Paste code value to environment variable <code>cfv_code</code></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2-get-climate-fieldview-tokens"></a>2. Get Climate FieldView tokens<a aria-hidden="true" tabindex="-1" class="hash-link" href="#2-get-climate-fieldview-tokens" title="Direct link to heading">#</a></h4><p>Hit &quot;Send&quot;</p><p>A lot of information will be returned. The important ones are <code>access_token</code>
and <code>refresh_token</code>. These will be automatically transferred to
<code>cfv_access_token</code> and <code>cfv_refresh_token</code> environment variables and will be
used in the next step.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="3-add-climate-fieldview-credentials"></a>3. Add Climate FieldView credentials<a aria-hidden="true" tabindex="-1" class="hash-link" href="#3-add-climate-fieldview-credentials" title="Direct link to heading">#</a></h4><p>Now we can create a Developer-User pair credentials ID that will allow you to
access your userâ€™s Climate data. We first add the Climate credentials to Leaf
API, to do that: Hit &quot;Send&quot;</p><p>An <code>id</code> for the credentials you just created will be returned. This <code>id</code> will
be automatically transferred to the value of <code>cfv_credentials_id</code> to be used in
the next step.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="leaf-user"></a>Leaf User<a aria-hidden="true" tabindex="-1" class="hash-link" href="#leaf-user" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="create-leaf-user"></a>Create Leaf User<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-leaf-user" title="Direct link to heading">#</a></h4><p>Now we have to attach credentials to a Leaf User. To do so, we can create a
Leaf user and attach our John Deere and/or Climate FieldView credentials via
the credentials id. We can also attach credentials from other companies to this
same user to query all available data by Grower/Farm/Field regardless of brand.</p><p>Update (optional) fields &quot;address&quot;, &quot;email&quot;, &quot;name&quot; and &quot;phone&quot; with your
user&#x27;s information.</p><p>We have automatically included our <code>jd_credentials_id</code> to this call and
attached it to this user.</p><p>Hit &quot;Send&quot;</p><p>Along with other information returned, there is an &quot;id&quot;. This &quot;id&quot; is the
<code>leaf_user_id</code> that will be used in the next (final) Step to query and access
files.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="update-leaf-user"></a>Update Leaf User<a aria-hidden="true" tabindex="-1" class="hash-link" href="#update-leaf-user" title="Direct link to heading">#</a></h4><p>To update a Leaf User, let&#x27;s say to add another provider credentials or change
the user&#x27;s address, we can use this PUT request. Since this method overwrites,
remember to send all the user&#x27;s information along with the information you want
to add or update. For example, if you want to add John Deere credentials to a
user that already has ClimateFieldView credentials, remember to specify both
credentials ids.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="get-specific-leaf-user"></a>Get specific Leaf User<a aria-hidden="true" tabindex="-1" class="hash-link" href="#get-specific-leaf-user" title="Direct link to heading">#</a></h4><p>Get specific Leaf User With this endpoint you can query all information on a
specific Leaf User, such as their address, email, credentials, etc. To do so,
update the value of the environment variable <code>leaf_user_id</code> to the Leaf User id
you want to query.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="gel-all-leaf-users"></a>Gel all Leaf Users<a aria-hidden="true" tabindex="-1" class="hash-link" href="#gel-all-leaf-users" title="Direct link to heading">#</a></h4><p>Get all Leaf Users With this endpoint you can query all information on all your
Leaf Users, such as their address, email, credentials, etc. Just hit &#x27;send&#x27;.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="query-operations-by-field"></a>Query Operations by Field<a aria-hidden="true" tabindex="-1" class="hash-link" href="#query-operations-by-field" title="Direct link to heading">#</a></h3><p>To query all operations that happened in a specific field (step 2), we first
need to create that field (step 1). Then, Leaf will automatically detect
operations of that field based on the operations&#x27; and on the field&#x27;s
coordinates. This process usually takes about 30 minutes.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1-create-field"></a>1. Create Field<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1-create-field" title="Direct link to heading">#</a></h4><p>Here we need to specify a leafUserId (that will be the Leaf User owner of that
field), a externalId (that will be the name we give to the field) and the
geojson geometry of the field (location). After creating the field we can query
it (step 2)</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2-get-operations-ids-by-field"></a>2. Get operations&#x27; ids by Field<a aria-hidden="true" tabindex="-1" class="hash-link" href="#2-get-operations-ids-by-field" title="Direct link to heading">#</a></h4><p>To query all operations that happened in a specific field, just update the
environment variable <code>field_external_id</code> to the field id you want to query
files.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="merge-operation-files"></a>Merge Operation Files<a aria-hidden="true" tabindex="-1" class="hash-link" href="#merge-operation-files" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1-merge-files"></a>1. Merge files<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1-merge-files" title="Direct link to heading">#</a></h4><p>Merging files with Leaf is a very simple process. You just have to list, in the
request json body, the ids of the files you want to merge. Make sure the
operations are of the same type (<code>APPLIED</code> or <code>HARVESTED</code> or <code>PLANTED</code>), so the
results are consistent.</p><p>After that, just hit &quot;send&quot; and an id for that merged file will be returned.
You can query that file as any other. It will be listed when you query for all
files and can also be queried specifically by its id</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2-query--access-specific-file"></a>2. Query &amp; access specific file<a aria-hidden="true" tabindex="-1" class="hash-link" href="#2-query--access-specific-file" title="Direct link to heading">#</a></h4><p>You can query a merged file as any other. It will be listed when you query for
all files and can also be queried specifically by its id. So this request is
the same as seen on &quot;Get Operation Files&quot;. You just have to update the
environment variable &quot;id&quot; to the id of the merged file.</p><p>Keep in mind that merging files is processing-heavy and may take about 20
minutes to finish.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Leaf-Agriculture/docs/tree/master/docs/files_postman.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a><ul><li><a href="#roadmap" class="table-of-contents__link">Roadmap</a></li><li><a href="#john-deere" class="table-of-contents__link">John Deere</a></li><li><a href="#climate-fieldview" class="table-of-contents__link">Climate FieldView</a></li><li><a href="#leaf-user" class="table-of-contents__link">Leaf User</a></li><li><a href="#query-operations-by-field" class="table-of-contents__link">Query Operations by Field</a></li><li><a href="#merge-operation-files" class="table-of-contents__link">Merge Operation Files</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/docs/styles.3d192486.js"></script>
<script src="/docs/runtime~main.4306c51d.js"></script>
<script src="/docs/main.e7a0127b.js"></script>
<script src="/docs/1.211e5842.js"></script>
<script src="/docs/2.ccad432d.js"></script>
<script src="/docs/3.53e9e6d7.js"></script>
<script src="/docs/1be78505.2338d5f2.js"></script>
<script src="/docs/101.350d9c3a.js"></script>
<script src="/docs/64f9f2ab.425176b5.js"></script>
<script src="/docs/17896441.ce50a2d7.js"></script>
<script src="/docs/d3cdf188.bfa2a2c1.js"></script>
</body>
</html>