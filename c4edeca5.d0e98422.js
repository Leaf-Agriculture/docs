(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{126:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return b})),a.d(t,"default",(function(){return d}));var n=a(2),r=a(6),i=(a(0),a(156)),o=a(163),s=a(164),l=(a(159),{title:"Alerts Endpoints",description:"Alerts - Endpoints",sidebar_label:"Endpoints"}),c={unversionedId:"alerts_endpoints",id:"alerts_endpoints",isDocsHomePage:!1,title:"Alerts Endpoints",description:"Alerts - Endpoints",source:"@site/docs/alerts_endpoints.md",permalink:"/docs/docs/alerts_endpoints",editUrl:"https://github.com/Leaf-Agriculture/docs/tree/master/docs/alerts_endpoints.md",sidebar_label:"Endpoints",sidebar:"docs",previous:{title:"Alerts Overview",permalink:"/docs/docs/alerts_overview"},next:{title:"List of Events",permalink:"/docs/docs/alerts_events"}},b=[{value:"Create a webhook",id:"create-a-webhook",children:[]},{value:"Get a webhook",id:"get-a-webhook",children:[]},{value:"Get all webhooks",id:"get-all-webhooks",children:[]},{value:"Get failed calls for webhooks",id:"get-failed-calls-for-webhooks",children:[]},{value:"Delete a webhook",id:"delete-a-webhook",children:[]},{value:"Other channels",id:"other-channels",children:[{value:"ArcGIS",id:"arcgis",children:[]}]}],p={rightToc:b};function d(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(n.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"All HTTP methods should be prepended by this service's endpoint:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),"https://api.withleaf.io/services/alerts/api/alerts\n")),Object(i.b)("p",null,"This service has the following endpoints available:"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Endpoints"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#create-a-webhook"}),"Create a webhook")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(i.b)("span",{class:"badge badge--warning"},"POST")," ",Object(i.b)("inlineCode",{parentName:"td"},"/webhooks"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#get-a-webhook"}),"Get a webhook")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(i.b)("span",{class:"badge badge--success"},"GET")," ",Object(i.b)("inlineCode",{parentName:"td"},"/webhooks/{id}"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#get-all-webhooks"}),"Get all webhooks")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(i.b)("span",{class:"badge badge--success"},"GET")," ",Object(i.b)("inlineCode",{parentName:"td"},"/webhooks"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#get-failed-calls-for-webhooks"}),"Get failed calls for webhooks")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(i.b)("span",{class:"badge badge--success"},"GET")," ",Object(i.b)("inlineCode",{parentName:"td"},"/webhooks/failed-calls"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"#delete-a-webhook"}),"Delete a webhook")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(i.b)("span",{class:"badge badge--danger"},"DELETE")," ",Object(i.b)("inlineCode",{parentName:"td"},"/webhooks/{id}"))))),Object(i.b)("p",null,"Note that currently it's not possible to update a Webhook with a single\nrequest. If you want to update an existing Webhook resource, you have to delete\nit first and then recreate it. In doing so, be aware that if the update changes\nthe Webhook URL, it's recommended that you keep the previous URL up and running\nuntil you get the response from the recreation request (POST)."),Object(i.b)("p",null,"For easy testing of these endpoints, we recommend using our Postman ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/Leaf-Agriculture/Leaf-quickstart-Postman-collection"}),"collection"),"."),Object(i.b)("p",null,"To understand how to verify if an incoming request comes from Leaf, see the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://docs.withleaf.io/docs/alerts_authentication"}),"Authentication section"),"."),Object(i.b)("hr",null),Object(i.b)("h3",{id:"create-a-webhook"},"Create a webhook"),Object(i.b)("p",null,"\xa0",Object(i.b)("span",{class:"badge badge--warning"},"POST")," ",Object(i.b)("inlineCode",{parentName:"p"},"/webhooks")),Object(i.b)("p",null,"Creates a webhook resource, specifying which events you want to be notified about and\nwhere (server URL). The webhook will begin receiving\nevents immediately after it is created."),Object(i.b)("p",null,"It's not possible to create different webhooks that listen to the same events. For example,\nif you have already registered a webhook listening for ",Object(i.b)("inlineCode",{parentName:"p"},"newSatelliteImages"),"\nand try to register another one, you'll get a 400 response with error ",Object(i.b)("inlineCode",{parentName:"p"},"eventRegisteredTwice"),"."),Object(i.b)("h4",{id:"request-body"},"Request body"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Parameter"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"events"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"enum name of the event type"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),'They are defined in the "Events" section of the services chapters (e.g. ',Object(i.b)("inlineCode",{parentName:"td"},"newSatelliteImage"),")")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"name"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The name of your webhook")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"secret"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The secret used for HMAC authentication. We sign payload with this secret. See more ",Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"https://docs.withleaf.io/docs/alerts_authentication"}),"here"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"url"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"a valid HTTP URL string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The address of your webhook server")))),Object(i.b)("p",null,"The allowed keys to be filled in events are:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"credentialsLimitedPermission"),", ",Object(i.b)("inlineCode",{parentName:"li"},"credentialsUnauthenticated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"fieldCreated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"fieldBoundaryCreated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"fieldBoundaryUpdated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"uploadedFileProcessingFinished"),", ",Object(i.b)("inlineCode",{parentName:"li"},"uploadedFileProcessingFailed"),", ",Object(i.b)("inlineCode",{parentName:"li"},"providerFileProcessingFinished"),", ",Object(i.b)("inlineCode",{parentName:"li"},"providerFileProcessingFailed"),", ",Object(i.b)("inlineCode",{parentName:"li"},"mergedFileProcessingFinished"),", ",Object(i.b)("inlineCode",{parentName:"li"},"mergedFileProcessingFailed"),", ",Object(i.b)("inlineCode",{parentName:"li"},"automergedFileProcessingFinished"),", ",Object(i.b)("inlineCode",{parentName:"li"},"automergedFileProcessingFailed"),", ",Object(i.b)("inlineCode",{parentName:"li"},"operationCreated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"operationUpdated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"operationProcessingFinished"),", ",Object(i.b)("inlineCode",{parentName:"li"},"newSatelliteImage"),", ",Object(i.b)("inlineCode",{parentName:"li"},"machineCreated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"machineUpdated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"machineDeleted"))),Object(i.b)("p",null,"To see the detailed description of each of these events, click ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://docs.withleaf.io/docs/alerts_events"}),"here"),"."),Object(i.b)("p",null,"Example in JSON:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "events": [\n    "newSatelliteImage"\n  ],\n  "name": "Satellite images listener",\n  "secret": "mRyT257XpFWX",\n  "url": "https://yourwebhook.com/leaf/satellite"\n}\n')),Object(i.b)("h4",{id:"request-example"},"Request example"),Object(i.b)(o.a,{defaultValue:"sh",values:[{label:"cURL",value:"sh"},{label:"Python",value:"py"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},Object(i.b)(s.a,{value:"js",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const axios = require('axios')\n\nconst TOKEN = 'YOUR_TOKEN'\nconst headers = {'Authorization': `Bearer ${TOKEN}`}\nconst endpoint = 'https://api.withleaf.io/services/alerts/api/alerts/webhooks'\n\nconst data = { /* Your payload as specified above  */ }\n\naxios.post(endpoint, {headers, data})\n    .then(response => console.log(response.data))\n    .catch(console.error)\n"))),Object(i.b)(s.a,{value:"py",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),"import requests\n\nTOKEN = 'YOUR_TOKEN'\nheaders = {'Authorization': f'Bearer {TOKEN}'}\nendpoint = 'https://api.withleaf.io/services/alerts/api/alerts/webhooks'\n\npayload = {...}  # Your payload as specified above\n\nresponse = requests.post(endpoint, headers=headers, json=payload)\nprint(response.json())\n"))),Object(i.b)(s.a,{value:"sh",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"curl -X POST \\\n    -H 'Content-Type: application/json' \\\n    -H 'Authorization: Bearer YOUR_TOKEN' \\\n    -d 'Your paylaod as specified above'\n    'https://api.withleaf.io/services/alerts/api/alerts/webhooks'\n")))),Object(i.b)("h4",{id:"response"},"Response"),Object(i.b)("p",null,"It returns a JSON containing information about the webhook created."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "id": "UUID",\n  "events": [\n    "newSatelliteImage"\n  ],\n  "name": "Satellite images listener",\n  "secret": "mRyT257XpFWX",\n  "url": "https://agtech.com/leaf/satellite"\n}\n')),Object(i.b)("p",null,"If you need to test your endpoint, here is a request example so you can simulate the validation Leaf will do."),Object(i.b)(o.a,{defaultValue:"sh",values:[{label:"cURL",value:"sh"},{label:"Python",value:"py"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},Object(i.b)(s.a,{value:"js",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const axios = require('axios')\n\nconst headers = {'Content-Type': 'application/json', 'accept': '*/*'}\nconst endpoint = 'your-webhook-url'\n\nconst data = {\"message\" : \"confirmation of webhook upon registration\"}\n\naxios.post(endpoint, {headers, data})\n    .then(response => console.log(response.data))\n    .catch(console.error)\n"))),Object(i.b)(s.a,{value:"py",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),"import requests\n\nheaders = {'Content-Type': 'application/json', 'accept': '*/*'}\nendpoint = 'your-webhook-url'\n\npayload = {\"message\" : \"confirmation of webhook upon registration\"}\n\nresponse = requests.post(endpoint, headers=headers, json=payload)\nprint(response.json())\n"))),Object(i.b)(s.a,{value:"sh",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"curl -X POST \\\n    -H 'Content-Type: application/json' \\\n    -H 'accept: */*' \\\n    -d '{\"message\" : \"confirmation of webhook upon registration\"}'\n    'your-webhook-url'\n")))),Object(i.b)("h3",{id:"get-a-webhook"},"Get a webhook"),Object(i.b)("p",null,"\xa0",Object(i.b)("span",{class:"badge badge--success"},"GET")," ",Object(i.b)("inlineCode",{parentName:"p"},"/webhooks/{id}")),Object(i.b)("p",null,"Retrieve a specific webhook resource by its id."),Object(i.b)("h4",{id:"request-example-1"},"Request example"),Object(i.b)(o.a,{defaultValue:"sh",values:[{label:"cURL",value:"sh"},{label:"Python",value:"py"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},Object(i.b)(s.a,{value:"js",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const axios = require('axios')\n\nconst TOKEN = 'YOUR_TOKEN'\nconst headers = {'Authorization': `Bearer ${TOKEN}`}\nconst id = 'webhook uuid'\nconst endpoint = `https://api.withleaf.io/services/alerts/api/alerts/webhooks/${id}`\n\naxios.get(endpoint, {headers})\n    .then(response => console.log(response.data))\n    .catch(console.error)\n"))),Object(i.b)(s.a,{value:"py",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),"import requests\n\nTOKEN = 'YOUR_TOKEN'\nheaders = {'Authorization': f'Bearer {TOKEN}'}\nid = 'webhook uuid'\nendpoint = f'https://api.withleaf.io/services/alerts/api/alerts/webhooks/{id}'\n\nresponse = requests.get(endpoint, headers=headers)\nprint(response.json())\n"))),Object(i.b)(s.a,{value:"sh",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"curl -X GET \\\n    -H 'Authorization: Bearer YOUR_TOKEN' \\\n    'https://api.withleaf.io/services/alerts/api/alerts/webhooks/{id}'\n")))),Object(i.b)("h4",{id:"response-1"},"Response"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "id": "UUID",\n  "events": [\n    "newSatelliteImage"\n  ],\n  "secret": "mRyT257XpFWX",\n  "name": "Satellite images listener",\n  "url": "https://agtech.com/leaf/satellite"\n}\n')),Object(i.b)("h3",{id:"get-all-webhooks"},"Get all webhooks"),Object(i.b)("p",null,"\xa0",Object(i.b)("span",{class:"badge badge--success"},"GET")," ",Object(i.b)("inlineCode",{parentName:"p"},"/webhooks")),Object(i.b)("p",null,"Retrieve all Webhooks."),Object(i.b)("h4",{id:"request-example-2"},"Request example"),Object(i.b)(o.a,{defaultValue:"sh",values:[{label:"cURL",value:"sh"},{label:"Python",value:"py"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},Object(i.b)(s.a,{value:"js",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const axios = require('axios')\n\nconst TOKEN = 'YOUR_TOKEN'\nconst headers = {'Authorization': `Bearer ${TOKEN}`}\nconst endpoint = 'https://api.withleaf.io/services/alerts/api/alerts/webhooks'\n\naxios.get(endpoint, {headers})\n    .then(response => console.log(response.data))\n    .catch(console.error)\n"))),Object(i.b)(s.a,{value:"py",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),"import requests\n\nTOKEN = 'YOUR_TOKEN'\nheaders = {'Authorization': f'Bearer {TOKEN}'}\nendpoint = 'https://api.withleaf.io/services/alerts/api/alerts/webhooks'\n\nresponse = requests.get(endpoint, headers=headers)\nprint(response.json())\n"))),Object(i.b)(s.a,{value:"sh",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"curl -X GET \\\n    -H 'Authorization: Bearer YOUR_TOKEN' \\\n    'https://api.withleaf.io/services/alerts/api/alerts/webhooks'\n")))),Object(i.b)("h4",{id:"response-2"},"Response"),Object(i.b)("p",null,"It returns a list of JSON objects."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'[{\n  "id": "UUID",\n  "events": [\n    "newSatelliteImage"\n  ],\n  "secret": "mRyT257XpFWX",\n  "name": "Satellite images listener",\n  "url": "https://agtech.com/leaf/satellite"\n}]\n')),Object(i.b)("h3",{id:"get-failed-calls-for-webhooks"},"Get failed calls for webhooks"),Object(i.b)("p",null,"\xa0",Object(i.b)("span",{class:"badge badge--success"},"GET")," ",Object(i.b)("inlineCode",{parentName:"p"},"/webhooks/failed-calls")),Object(i.b)("p",null,"Retrieve all failed calls for webhooks."),Object(i.b)("h4",{id:"request-example-3"},"Request example"),Object(i.b)(o.a,{defaultValue:"sh",values:[{label:"cURL",value:"sh"},{label:"Python",value:"py"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},Object(i.b)(s.a,{value:"js",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const axios = require('axios')\n\nconst TOKEN = 'YOUR_TOKEN'\nconst headers = {'Authorization': `Bearer ${TOKEN}`}\nconst endpoint = 'https://api.withleaf.io/services/alerts/api/alerts/webhooks/failed-calls'\n\naxios.get(endpoint, {headers})\n    .then(response => console.log(response.data))\n    .catch(console.error)\n"))),Object(i.b)(s.a,{value:"py",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),"import requests\n\nTOKEN = 'YOUR_TOKEN'\nheaders = {'Authorization': f'Bearer {TOKEN}'}\nendpoint = 'https://api.withleaf.io/services/alerts/api/alerts/webhooks/failed-calls'\n\nresponse = requests.get(endpoint, headers=headers)\nprint(response.json())\n"))),Object(i.b)(s.a,{value:"sh",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"curl -X GET \\\n    -H 'Authorization: Bearer YOUR_TOKEN' \\\n    'https://api.withleaf.io/services/alerts/api/alerts/webhooks/failed-calls'\n")))),Object(i.b)("h4",{id:"response-3"},"Response"),Object(i.b)("p",null,"It returns a list of JSON objects."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "items": [\n      {\n        "apiOwner": "yourApiOwner",\n        "createdAt": "2023-04-21T12:16:30Z",\n        "url": "https://webhook.site/{{uuid}}",\n        "status": 502,\n        "response": "<html>\\r\\n<head><title>502 Bad Gateway</title></head>\\r\\n<body bgcolor=\\"white\\">\\r\\n<center><h1>502 Bad Gateway</h1></center>\\r\\n<hr><center>nginx</center>\\r\\n</body>\\r\\n</html>\\r\\n",\n        "requestBody": "{\\"leafUserId\\": \\"uuid\\", \\"fileId\\": \\"uuid\\", \\"type\\": \\"automergedFileProcessingFinished\\", \\"timestamp\\": \\"2023-04-21T12:16:27.997586Z\\"}"\n      },\n      {\n        "apiOwner": "yourApiOwner",\n        "createdAt": "2023-04-24T18:35:53Z",\n        "url": "https://webhook.site/{{uuid}}",\n        "status": 502,\n        "response": "<html>\\r\\n<head><title>502 Bad Gateway</title></head>\\r\\n<body bgcolor=\\"white\\">\\r\\n<center><h1>502 Bad Gateway</h1></center>\\r\\n<hr><center>nginx</center>\\r\\n</body>\\r\\n</html>\\r\\n",\n        "requestBody": "{\\"leafUserId\\": \\"uuid\\", \\"fileId\\": \\"uuid\\", \\"type\\": \\"automergedFileProcessingFinished\\", \\"timestamp\\": \\"2023-04-24T18:35:52.187785Z\\"}"\n      },\n      {\n        "apiOwner": "yourApiOwner",\n        "createdAt": "2023-04-24T18:35:53Z",\n        "url": "https://flamboyant-flower-64651.pktriot.net/",\n        "requestBody": "{\\"source\\": \\"SYNC\\", \\"leafUserId\\": \\"ff044168-45aa-00d8-8b7e-8632d5c23616\\", \\"fieldId\\": \\"ed080ca3-69fe-365c-972f-a0d000fe7c0e\\", \\"type\\": \\"fieldCreated\\", \\"timestamp\\": \\"2023-04-24T18:35:53Z\\"}",\n        "connectionError": "ConnectionError: HTTPSConnectionPool(host=\'flamboyant-flower-64651.pktriot.net\', port=443): Max retries exceeded with url: / (Caused by ProtocolError(\'Connection aborted.\', RemoteDisconnected(\'Remote end closed connection without response\')))"\n      }\n   ]\n}\n')),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"In case of alert delivery failures, Leaf Alerts will make new attempts at 1, 30, 60 and 240 minutes."))),Object(i.b)("h3",{id:"delete-a-webhook"},"Delete a webhook"),Object(i.b)("p",null,"\xa0",Object(i.b)("span",{class:"badge badge--danger"},"DELETE")," ",Object(i.b)("inlineCode",{parentName:"p"},"/webhooks/{id}")),Object(i.b)("p",null,"Delete a specific Webhook resource by its id. Returns 204 status code if the\ndelete succeeded."),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"Warning")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"If you delete a Webhook resource, we no longer will send you the events the\nwebhook listens to."))),Object(i.b)("h4",{id:"request-example-4"},"Request example"),Object(i.b)(o.a,{defaultValue:"sh",values:[{label:"cURL",value:"sh"},{label:"Python",value:"py"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},Object(i.b)(s.a,{value:"js",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const axios = require('axios')\n\nconst TOKEN = 'YOUR_TOKEN'\nconst headers = {'Authorization': `Bearer ${TOKEN}`}\nconst id = 'webhook uuid'\nconst endpoint = `https://api.withleaf.io/services/alerts/api/alerts/webhooks/${id}`\n\naxios.delete(endpoint, {headers})\n    .then(response => console.log(response.data))\n    .catch(console.error)\n"))),Object(i.b)(s.a,{value:"py",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),"import requests\n\nTOKEN = 'YOUR_TOKEN'\nheaders = {'Authorization': f'Bearer {TOKEN}'}\nid = 'webhook uuid'\nendpoint = f'https://api.withleaf.io/services/alerts/api/alerts/webhooks/{id}'\n\nresponse = requests.delete(endpoint, headers=headers)\nprint(response.json())\n"))),Object(i.b)(s.a,{value:"sh",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"curl -X DELETE \\\n    -H 'Authorization: Bearer YOUR_TOKEN' \\\n    'https://api.withleaf.io/services/alerts/api/alerts/webhooks/{id}'\n")))),Object(i.b)("h2",{id:"other-channels"},"Other channels"),Object(i.b)("h3",{id:"arcgis"},"ArcGIS"),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"This option is a beta feature"))),Object(i.b)("p",null,"The alerts can be delivered in other channels like the ",Object(i.b)("inlineCode",{parentName:"p"},"arcgis")," that enables the alert to be sent direct to an ArcGIS Geoprocessing service."),Object(i.b)("h4",{id:"create-an-arcgis-alert"},"Create an ArcGIS alert"),Object(i.b)("p",null,"\xa0",Object(i.b)("span",{class:"badge badge--warning"},"POST")," ",Object(i.b)("inlineCode",{parentName:"p"},"/arcgis")),Object(i.b)("p",null,"Creates a alert for be consumed in an ArcGIS geoprocessing service specifying which events you want to be notified about and where (server URL). The alert will begin receiving events immediately after it is created."),Object(i.b)("p",null,"It's not possible to create different alerts that listen to the same events. For example,\nif you have already registered a alerts listening for ",Object(i.b)("inlineCode",{parentName:"p"},"newSatelliteImages"),"\nand try to register another one, you'll get a 400 response with error ",Object(i.b)("inlineCode",{parentName:"p"},"eventRegisteredTwice"),"."),Object(i.b)("h4",{id:"request-body-1"},"Request body"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Parameter"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"events"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"enum name of the event type"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),'They are defined in the "Events" section of the services chapters (e.g. ',Object(i.b)("inlineCode",{parentName:"td"},"newSatelliteImage"),")")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"name"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The name of your alert")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"secret"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The secret used for HMAC authentication. We sign payload with this secret. See more ",Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"https://docs.withleaf.io/docs/alerts_authentication"}),"here"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"url"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"a valid HTTP URL string"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The address of your geoprocessing service, make sure to use this format:  ",Object(i.b)("inlineCode",{parentName:"td"},"https://{ArcGIS Server url}/server/rest/services/{service name}/GPServer/{toolname}/submitJob?f=json"))))),Object(i.b)("p",null,"The allowed keys to be filled in events are:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"credentialsLimitedPermission"),", ",Object(i.b)("inlineCode",{parentName:"li"},"credentialsUnauthenticated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"fieldCreated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"fieldBoundaryCreated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"fieldBoundaryUpdated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"uploadedFileProcessingFinished"),", ",Object(i.b)("inlineCode",{parentName:"li"},"uploadedFileProcessingFailed"),", ",Object(i.b)("inlineCode",{parentName:"li"},"providerFileProcessingFinished"),", ",Object(i.b)("inlineCode",{parentName:"li"},"providerFileProcessingFailed"),", ",Object(i.b)("inlineCode",{parentName:"li"},"mergedFileProcessingFinished"),", ",Object(i.b)("inlineCode",{parentName:"li"},"mergedFileProcessingFailed"),", ",Object(i.b)("inlineCode",{parentName:"li"},"automergedFileProcessingFinished"),", ",Object(i.b)("inlineCode",{parentName:"li"},"automergedFileProcessingFailed"),", ",Object(i.b)("inlineCode",{parentName:"li"},"operationCreated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"operationUpdated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"operationProcessingFinished"),", ",Object(i.b)("inlineCode",{parentName:"li"},"newSatelliteImage"),", ",Object(i.b)("inlineCode",{parentName:"li"},"machineCreated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"machineUpdated"),", ",Object(i.b)("inlineCode",{parentName:"li"},"machineDeleted"))),Object(i.b)("p",null,"To see the detailed description of each of these events, click ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://docs.withleaf.io/docs/alerts_events"}),"here"),"."),Object(i.b)("p",null,"Example in JSON:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "events": [\n    "newSatelliteImage"\n  ],\n  "name": "Satellite images listener",\n  "secret": "mRyT257XpFWX",\n  "url": "arcgis geoprocessing url"\n}\n')),Object(i.b)("h4",{id:"request-example-5"},"Request example"),Object(i.b)(o.a,{defaultValue:"sh",values:[{label:"cURL",value:"sh"},{label:"Python",value:"py"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},Object(i.b)(s.a,{value:"js",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const axios = require('axios')\n\nconst TOKEN = 'YOUR_TOKEN'\nconst headers = {'Authorization': `Bearer ${TOKEN}`}\nconst endpoint = 'https://api.withleaf.io/services/alerts/api/alerts/arcgis'\n\nconst data = { /* Your payload as specified above  */ }\n\naxios.post(endpoint, {headers, data})\n    .then(response => console.log(response.data))\n    .catch(console.error)\n"))),Object(i.b)(s.a,{value:"py",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-py"}),"import requests\n\nTOKEN = 'YOUR_TOKEN'\nheaders = {'Authorization': f'Bearer {TOKEN}'}\nendpoint = 'https://api.withleaf.io/services/alerts/api/alerts/arcgis'\n\npayload = {...}  # Your payload as specified above\n\nresponse = requests.post(endpoint, headers=headers, json=payload)\nprint(response.json())\n"))),Object(i.b)(s.a,{value:"sh",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"curl -X POST \\\n    -H 'Content-Type: application/json' \\\n    -H 'Authorization: Bearer YOUR_TOKEN' \\\n    -d 'Your paylaod as specified above'\n    'https://api.withleaf.io/services/alerts/api/alerts/arcgis'\n")))),Object(i.b)("h4",{id:"response-4"},"Response"),Object(i.b)("p",null,"It returns a JSON containing information about the webhook created."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "id": "UUID",\n  "events": [\n    "newSatelliteImage"\n  ],\n  "name": "Satellite images listener",\n  "secret": "mRyT257XpFWX",\n  "url": "arcgis geoprocessing url"\n}\n')),Object(i.b)("h4",{id:"geoprocessing-configuration"},"Geoprocessing configuration"),Object(i.b)("p",null,"This option requires that the geoprocessing is publicly available, that is, without authentication."),Object(i.b)("p",null,"To prevent anyone from using your service inappropriately, consider implementing the secret validation mentioned ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://docs.withleaf.io/docs/alerts_authentication"}),"here"),"."))}d.isMDXComponent=!0},156:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return O}));var n=a(0),r=a.n(n);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=r.a.createContext({}),b=function(e){var t=r.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=b(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,o=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=b(a),u=n,O=p["".concat(o,".").concat(u)]||p[u]||d[u]||i;return a?r.a.createElement(O,s(s({ref:t},c),{},{components:a})):r.a.createElement(O,s({ref:t},c))}));function O(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,o[1]=s;for(var c=2;c<i;c++)o[c]=a[c];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"},157:function(e,t,a){"use strict";var n=a(0),r=a(20);t.a=function(){var e=Object(n.useContext)(r.a);if(null===e)throw new Error("Docusaurus context not provided");return e}},158:function(e,t,a){"use strict";function n(e){var t,a,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=n(e[t]))&&(r&&(r+=" "),r+=a);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}t.a=function(){for(var e,t,a=0,r="";a<arguments.length;)(e=arguments[a++])&&(t=n(e))&&(r&&(r+=" "),r+=t);return r}},159:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o}));var n=a(157),r=a(160);function i(){var e=Object(n.a)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,a=void 0===t?"/":t,i=e.url;return{withBaseUrl:function(e,t){return function(e,t,a,n){var i=void 0===n?{}:n,o=i.forcePrependBaseUrl,s=void 0!==o&&o,l=i.absolute,c=void 0!==l&&l;if(!a)return a;if(a.startsWith("#"))return a;if(Object(r.b)(a))return a;if(s)return t+a;var b=!a.startsWith(t)?t+a.replace(/^\//,""):a;return c?e+b:b}(i,a,e,t)}}}function o(e,t){return void 0===t&&(t={}),(0,i().withBaseUrl)(e,t)}},160:function(e,t,a){"use strict";function n(e){return!0===/^(\w*:|\/\/)/.test(e)}function r(e){return void 0!==e&&!n(e)}a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}))},161:function(e,t,a){"use strict";var n=a(0),r=Object(n.createContext)(void 0);t.a=r},162:function(e,t,a){"use strict";var n=a(0),r=a(161);t.a=function(){var e=Object(n.useContext)(r.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},163:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(162),o=a(158),s=a(48),l=a.n(s),c=37,b=39;t.a=function(e){var t=e.block,a=e.children,s=e.defaultValue,p=e.values,d=e.groupId,u=Object(i.a)(),O=u.tabGroupChoices,h=u.setTabGroupChoices,m=Object(n.useState)(s),j=m[0],g=m[1],f=Object(n.useState)(!1),N=f[0],v=f[1];if(null!=d){var y=O[d];null!=y&&y!==j&&p.some((function(e){return e.value===y}))&&g(y)}var w=function(e){g(e),null!=d&&h(d,e)},T=[],k=function(e){e.metaKey||e.altKey||e.ctrlKey||v(!0)},C=function(){v(!1)};return Object(n.useEffect)((function(){window.addEventListener("keydown",k),window.addEventListener("mousedown",C)}),[]),r.a.createElement("div",null,r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(o.a)("tabs",{"tabs--block":t})},p.map((function(e){var t=e.value,a=e.label;return r.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":j===t,className:Object(o.a)("tabs__item",l.a.tabItem,{"tabs__item--active":j===t}),style:N?{}:{outline:"none"},key:t,ref:function(e){return T.push(e)},onKeyDown:function(e){!function(e,t,a){switch(a.keyCode){case b:!function(e,t){var a=e.indexOf(t)+1;e[a]?e[a].focus():e[0].focus()}(e,t);break;case c:!function(e,t){var a=e.indexOf(t)-1;e[a]?e[a].focus():e[e.length-1].focus()}(e,t)}}(T,e.target,e),k(e)},onFocus:function(){return w(t)},onClick:function(){w(t),v(!1)},onPointerDown:function(){return v(!1)}},a)}))),r.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},n.Children.toArray(a).filter((function(e){return e.props.value===j}))[0]))}},164:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){return r.a.createElement("div",null,e.children)}}}]);